<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fourier‚Äôs Law Heat Flow Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
    --cyan1:#c9f7f5;
    --cyan2:#e6fffa;
    --orange:#fd7e14;
}

/* BODY */
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:linear-gradient(135deg,var(--cyan1),var(--cyan2));
}

/* DARK MODE */
body.dark{
    background:linear-gradient(135deg,#020617,#0f172a);
    color:#e5e7eb;
}

/* HEADER */
header{
    background:linear-gradient(90deg,#0891b2,#06b6d4);
    color:white;
    text-align:center;
    padding:18px;
    font-size:24px;
    font-weight:bold;
    box-shadow:0 6px 12px rgba(0,0,0,0.25);
}

/* LAYOUT */
.container{
    display:grid;
    grid-template-columns:1fr 1.5fr 1.5fr;
    gap:16px;
    padding:16px;
}

/* PANELS */
.panel{
    background:rgba(255,255,255,0.95);
    padding:16px;
    border-radius:14px;
    box-shadow:0 10px 22px rgba(0,0,0,0.18);
}
body.dark .panel{
    background:rgba(15,23,42,0.95);
}

/* HEADINGS */
h3{
    margin-top:0;
    border-bottom:2px solid #e5e7eb;
    padding-bottom:6px;
}

/* INPUTS */
input,select{
    width:100%;
    padding:8px;
    margin:6px 0;
    border-radius:8px;
    border:1px solid #cbd5e1;
    background:#f8fafc;
}
body.dark input, body.dark select{
    background:#020617;
    color:white;
    border:1px solid #334155;
}

/* BUTTONS */
button{
    width:100%;
    padding:12px;
    margin-top:10px;
    border:none;
    border-radius:10px;
    background:linear-gradient(135deg,#ff8c1a,#fd7e14);
    color:white;
    font-size:15px;
    font-weight:bold;
    cursor:pointer;
    box-shadow:0 6px 0 #c65a0a,0 10px 18px rgba(0,0,0,0.25);
    transition:all 0.15s ease;
    position:relative;
    overflow:hidden;
}
button:hover{
    transform:translateY(-3px);
}
button:active{
    transform:translateY(2px);
    box-shadow:0 3px 0 #c65a0a;
}

/* RIPPLE */
.ripple{
    position:absolute;
    border-radius:50%;
    transform:scale(0);
    animation:ripple 0.6s linear;
    background:rgba(255,255,255,0.6);
}
@keyframes ripple{
    to{
        transform:scale(4);
        opacity:0;
    }
}

/* RESULT BOX */
.result-box{
    background:#e0f2fe;
    padding:12px;
    border-radius:10px;
    margin-bottom:12px;
    border-left:5px solid #06b6d4;
}
body.dark .result-box{
    background:#020617;
}

/* CANVAS */
canvas{
    background:white;
    border-radius:10px;
    box-shadow:0 4px 10px rgba(0,0,0,0.12);
}

/* TOGGLE */
.toggle{
    position:fixed;
    top:15px;
    right:15px;
    background:#22d3ee;
    color:black;
    padding:8px 14px;
    border-radius:20px;
    font-weight:bold;
    cursor:pointer;
    box-shadow:0 4px 10px rgba(0,0,0,0.3);
}
</style>
</head>

<body>

<header>Fourier‚Äôs Law Heat Flow Calculator</header>
<div class="toggle" onclick="toggleMode()">üåô Dark</div>

<div class="container">

<!-- INPUT -->
<div class="panel">
<h3>Input Parameters</h3>

Inner Radius
<input id="r1" type="number" value="5">
<select id="r1unit"><option value="0.01">cm</option><option value="1">m</option></select>

Outer Radius
<input id="r2" type="number" value="7">
<select id="r2unit"><option value="0.01">cm</option><option value="1">m</option></select>

Inner Temperature (¬∞C)
<input id="T1" type="number" value="200">

Outer Temperature (¬∞C)
<input id="T2" type="number" value="50">

Thermal Conductivity (W/m¬∑K)
<input id="k" type="number" value="45">

Pipe Length
<input id="L" type="number" value="1">
<select id="Lunit"><option value="1">m</option><option value="0.01">cm</option></select>

Time (seconds)
<input id="time" type="number" value="60">

Output Unit
<select id="outunit"><option value="W">Watt</option><option value="cal">cal/sec</option></select>

<button onclick="calculate()">Calculate</button>
</div>

<!-- DIAGRAM -->
<div class="panel">
<h3>Pipe Cross-Section</h3>
<canvas id="pipeCanvas" width="360" height="360"></canvas>
</div>

<!-- RESULTS -->
<div class="panel">
<h3>Results & Graphs</h3>
<div id="results" class="result-box"></div>
<canvas id="tempChart"></canvas><br>
<canvas id="timeChart"></canvas>
</div>

</div>

<script>
let tempChart,timeChart,pulse=0,lastR1,lastR2;

/* DARK MODE */
function toggleMode(){
    document.body.classList.toggle("dark");
}

/* RIPPLE */
document.addEventListener("click",e=>{
    if(e.target.tagName==="BUTTON"){
        const r=document.createElement("span");
        r.className="ripple";
        r.style.left=e.offsetX+"px";
        r.style.top=e.offsetY+"px";
        e.target.appendChild(r);
        setTimeout(()=>r.remove(),600);
    }
});

/* PIPE DRAW */
function drawPipe(r1,r2){
    lastR1=r1; lastR2=r2;
    const c=document.getElementById("pipeCanvas");
    const ctx=c.getContext("2d");
    ctx.clearRect(0,0,c.width,c.height);

    const cx=c.width/2,cy=c.height/2;
    const scale=140/r2;
    const R2=r2*scale,R1=r1*scale;

    pulse+=0.03;
    const grad=ctx.createRadialGradient(cx,cy,R1,cx,cy,R2);
    grad.addColorStop(0,"#ffffff");
    grad.addColorStop(0.6+0.1*Math.sin(pulse),"#ff9800");
    grad.addColorStop(1,"#ff5722");

    ctx.beginPath();
    ctx.arc(cx,cy,R2,0,2*Math.PI);
    ctx.fillStyle=grad;
    ctx.fill();

    ctx.beginPath();
    ctx.arc(cx,cy,R1,0,2*Math.PI);
    ctx.fillStyle="#ffffff";
    ctx.fill();

    ctx.strokeStyle="#333";
    ctx.stroke();

    ctx.fillStyle="#000";
    ctx.font="14px Arial";
    ctx.fillText(`r‚ÇÅ = ${r1.toFixed(3)} m`,cx+R1/2-20,cy-8);
    ctx.fillText(`r‚ÇÇ = ${r2.toFixed(3)} m`,cx+R2/2-20,cy+20);
}

/* ANIMATION */
function animate(){
    if(lastR1) drawPipe(lastR1,lastR2);
    requestAnimationFrame(animate);
}
animate();

/* CALCULATE */
function calculate(){
    const r1=document.getElementById("r1").value*document.getElementById("r1unit").value;
    const r2=document.getElementById("r2").value*document.getElementById("r2unit").value;
    const T1=+T1.value, T2=+T2.value;
    const k=+k.value;
    const L=L.value*Lunit.value;
    const time=+timeInput.value||+document.getElementById("time").value;
    const unit=outunit.value;

    const Q=(2*Math.PI*k*L*(T1-T2))/Math.log(r2/r1);
    const Qout=unit==="cal"?Q/4.186:Q;

    results.innerHTML=`
<b>Heat Flow Rate:</b> ${Qout.toFixed(4)} ${unit==="cal"?"cal/sec":"W"}<br>
<b>Total Heat:</b> ${(Qout*time).toFixed(4)}<br>
<b>Formula:</b> Q = 2œÄkL(T‚ÇÅ‚àíT‚ÇÇ)/ln(r‚ÇÇ/r‚ÇÅ)
`;

    drawPipe(r1,r2);

    const rv=[],tv=[];
    for(let i=0;i<=20;i++){
        const r=r1+(r2-r1)*i/20;
        rv.push(r.toFixed(4));
        tv.push((T1-(T1-T2)*Math.log(r/r1)/Math.log(r2/r1)).toFixed(2));
    }

    if(tempChart) tempChart.destroy();
    tempChart=new Chart(tempChart?.canvas||tempChart,{
        type:"line",
        data:{labels:rv,datasets:[{label:"Temperature (¬∞C)",data:tv,borderWidth:3,borderColor:"#ff5722"}]}
    });

    const t=[],q=[];
    for(let i=0;i<=10;i++){t.push(i*time/10);q.push(Qout);}
    if(timeChart) timeChart.destroy();
    timeChart=new Chart(timeChart?.canvas||timeChart,{
        type:"line",
        data:{labels:t,datasets:[{label:"Heat Flow",data:q,borderWidth:3,borderColor:"#06b6d4"}]}
    });
}
</script>

</body>
</html>
